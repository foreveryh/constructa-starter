[
  {
    "feature": "Usage/Cost 信息",
    "supported": true,
    "details": {
      "resultEvent": {
        "type": "result",
        "subtype": "success",
        "is_error": false,
        "duration_ms": 8557,
        "duration_api_ms": 20856,
        "num_turns": 1,
        "result": "2 + 2 = 4",
        "session_id": "abdbb157-e617-4e07-adb5-2f8deae2ab79",
        "total_cost_usd": 0.0369184,
        "usage": {
          "input_tokens": 10098,
          "cache_creation_input_tokens": 0,
          "cache_read_input_tokens": 3456,
          "output_tokens": 8,
          "server_tool_use": {
            "web_search_requests": 0,
            "web_fetch_requests": 0
          },
          "service_tier": "standard",
          "cache_creation": {
            "ephemeral_1h_input_tokens": 0,
            "ephemeral_5m_input_tokens": 0
          }
        },
        "modelUsage": {
          "claude-sonnet-4-5-20250929": {
            "inputTokens": 10481,
            "outputTokens": 184,
            "cacheReadInputTokens": 4096,
            "cacheCreationInputTokens": 0,
            "webSearchRequests": 0,
            "costUSD": 0.03543179999999999,
            "contextWindow": 200000
          },
          "claude-haiku-4-5-20251001": {
            "inputTokens": 613,
            "outputTokens": 158,
            "cacheReadInputTokens": 836,
            "cacheCreationInputTokens": 0,
            "webSearchRequests": 0,
            "costUSD": 0.0014866,
            "contextWindow": 200000
          }
        },
        "permission_denials": [],
        "uuid": "73afe66e-97d9-4976-abae-8bb0346d355b"
      },
      "foundFields": {
        "usage": {
          "input_tokens": 10098,
          "cache_creation_input_tokens": 0,
          "cache_read_input_tokens": 3456,
          "output_tokens": 8,
          "server_tool_use": {
            "web_search_requests": 0,
            "web_fetch_requests": 0
          },
          "service_tier": "standard",
          "cache_creation": {
            "ephemeral_1h_input_tokens": 0,
            "ephemeral_5m_input_tokens": 0
          }
        },
        "total_cost_usd": 0.0369184,
        "duration_ms": 8557,
        "num_turns": 1
      },
      "assistantMessageUsage": []
    },
    "notes": [
      "Result 事件包含 usage 或 total_cost_usd 字段"
    ]
  },
  {
    "feature": "会话元数据",
    "supported": true,
    "details": {
      "systemInitEvent": {
        "type": "system",
        "subtype": "init",
        "cwd": "/Users/peng/Dev/Projects/ClaudeAgentChat/constructa-starter",
        "session_id": "172a1e5b-8ed6-4237-a30e-85b7e7f21fef",
        "tools": [
          "Task",
          "TaskOutput",
          "Bash",
          "Glob",
          "Grep",
          "ExitPlanMode",
          "Read",
          "Edit",
          "Write",
          "NotebookEdit",
          "WebFetch",
          "TodoWrite",
          "WebSearch",
          "KillShell",
          "AskUserQuestion",
          "Skill",
          "EnterPlanMode"
        ],
        "mcp_servers": [],
        "model": "claude-sonnet-4-5-20250929",
        "permissionMode": "default",
        "slash_commands": [
          "compact",
          "context",
          "cost",
          "init",
          "pr-comments",
          "release-notes",
          "review",
          "security-review"
        ],
        "apiKeySource": "ANTHROPIC_API_KEY",
        "claude_code_version": "2.0.73",
        "output_style": "default",
        "agents": [
          "general-purpose",
          "statusline-setup",
          "Explore",
          "Plan",
          "claude-code-guide"
        ],
        "skills": [],
        "plugins": [],
        "uuid": "1f9cf3ae-8a71-4376-82e2-770dfe661cf4"
      },
      "foundFields": {
        "session_id": "172a1e5b-8ed6-4237-a30e-85b7e7f21fef",
        "model": "claude-sonnet-4-5-20250929",
        "tools": [
          "Task",
          "TaskOutput",
          "Bash",
          "Glob",
          "Grep",
          "ExitPlanMode",
          "Read",
          "Edit",
          "Write",
          "NotebookEdit",
          "WebFetch",
          "TodoWrite",
          "WebSearch",
          "KillShell",
          "AskUserQuestion",
          "Skill",
          "EnterPlanMode"
        ],
        "mcp_servers": [],
        "permissionMode": "default",
        "cwd": "/Users/peng/Dev/Projects/ClaudeAgentChat/constructa-starter",
        "apiKeySource": "ANTHROPIC_API_KEY",
        "slash_commands": [
          "compact",
          "context",
          "cost",
          "init",
          "pr-comments",
          "release-notes",
          "review",
          "security-review"
        ],
        "output_style": "default"
      }
    },
    "notes": [
      "system.init 事件包含必要的元数据"
    ]
  },
  {
    "feature": "错误详情",
    "supported": false,
    "details": {},
    "notes": [
      "测试未触发错误（可能是正常处理了不存在的文件）"
    ]
  },
  {
    "feature": "工具进度支持",
    "supported": false,
    "details": {
      "eventTypes": [
        "system",
        "assistant",
        "user",
        "result"
      ],
      "totalEvents": 6,
      "foundProgress": false
    },
    "notes": [
      "事件类型: system, assistant, user, result",
      "未发现 tool_progress 事件",
      "SDK 可能不支持工具进度，或使用其他机制（如 StreamEvent）"
    ]
  }
]